<!DOCTYPE html>
<html class="h-100" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="common/header :: head_fragment(title='日報詳細')"></head>
<body class="h-100 overflow-hidden">
  <div class="row h-100">
    <div class="h-100 p-3 mb-2 bg-dark text-white col-sm-2">
      <nav th:replace="common/side :: copy"></nav>
    </div>
    <div class="mt-3 h-100 col-sm-10">
      <div class="container-fluid p-0">
        <h1 class="h3 mb-3">日報 詳細</h1>

        <div class="card">
          <div class="card-body">
            <table class="table table-striped">
              <tbody>
                <!-- 日付→氏名→タイトル→内容→登録日時→更新日時 -->
                <tr>
                  <th class="w-25">日付</th>
                  <td th:text="${#temporals.format(report.reportDate,'yyyy-MM-dd')}"></td>
                </tr>
                <tr>
                  <th>氏名</th>
                  <td th:text="${report.employee.name}"></td>
                </tr>
                <tr>
                  <th>タイトル</th>
                  <td th:text="${report.title}"></td>
                </tr>
                <tr>
                  <th>内容</th>
                  <!-- 改行を保持して画面の端で自動改行 -->
                  <td>
                    <pre class="m-0" style="white-space: pre-wrap; word-wrap: break-word; "th:text="${report.content}"></pre>
                  </td>
                </tr>
                <tr>
                  <th>登録日時</th>
                  <td th:text="${#temporals.format(report.createdAt,'yyyy-MM-dd HH:mm:ss')}"></td>
                </tr>
                <tr>
                  <th>更新日時</th>
                  <td th:text="${#temporals.format(report.updatedAt,'yyyy-MM-dd HH:mm:ss')}"></td>
                </tr>
              </tbody>
            </table>

            <!-- ボタン　更新 → 削除 → 戻る -->
            <div class="d-flex gap-2">
              <a class="btn btn-primary" th:href="@{/reports/{id}/update(id=${report.id})}">更新</a>

              <form th:action="@{/reports/{id}/delete(id=${report.id})}"
                    method="post" class="m-0"
                    onsubmit="return confirmDelete();">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button type="submit" class="btn btn-primary">削除</button>
              </form>
              <script th:inline="javascript">
                    function confirmDelete() {
                    return window.confirm('削除しますか？');
                    }
              </script>
              <a class="btn btn-primary" th:href="@{/reports}">戻る</a>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</body>
</html>
